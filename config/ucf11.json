{
    // meta info
    "name": "ucf11",
    "type": "cnn",
    // input info
    "input": {
        "type": "video",
        // existence form of data
        "read_from": "clips",
        "num_class": 11,
        // input will be resized to [height, width]
        "read_resolution": [240, 320],
        "clip_length": 16,
        // RGB or other
        "num_channel": 3,
        // preprocess info (pipeline)
        "preproc": [
            // {
            //  "name": "resize",
            //  // [height, width, ...]
            //  "size": [120, 160]
            // },
            {
                "name": "random_crop",
                // [depth(time), height, width, in-channels]
                "size": [16, 112, 112, 3]
                // "num_crop": 5 (no need) 
            }, {
             "name": "flip_left_right",
             "prob": 0.5
            }
            // , {
                // "name": "whitening"
                // subtract mean from every pixel
                // "type": "mean"
            // }
        ],
        // enqueue info
        "queue": {
            // "FIFO" or "shuffle" queue
            "type": "shuffle",
            "capacity": 50,
            "min_remain": 30,
            "num_reader": 5
        }
    },

    // sharing hyperparameters
    "batch_size": 30,

    // train info
    "train": {
        // content: path + label_id
        "lst_path": "~/dataset/train_lst",
        "initial_learning_rate": 0.003, 
        "max_steps": 60000,
        "num_examples_per_epoch": 20000,
        // Epochs after which learning rate decays
        "num_epochs_per_decay": 350.0,
        // The decay to use for the moving average
        "moving_average_decay": 0.9999,
        // Learning rate decay factor
        "learning_rate_decay_factor": 0.1,
        // checkpoint after train
        "train_dir": "/tmp/C3D_train"
    },  
    // eval info
    "eval": {
        // content: path + label_id
        "lst_path": "~/dataset/test_lst",
        // Directory where to write event logs
        "eval_dir": "/tmp/C3D_eval",
        // Directory where to read model checkpoints
        "checkpoint_dir": "/tmp/C3D_train",
        // How often to run the eval if run_once == false
        "eval_interval_secs": 300,
        // The decay to use for the moving average
        "moving_average_decay": 0.9999,
        // Number of examples to run
        "num_examples": 100,
        // Whether to run eval only once
        "run_once": true,
        "num_examples_per_epoch": 100
    },

    // graph info
    "graph": [
        // K64: 64 kernels
        // T1: temporal depth == 1
        "CONV3_K64", "POOL3_T1",
        "CONV3_K128", "POOL3_T2",
        
        "CONV3_K256", "POOL3_T2",
        "CONV3_K256", "POOL3_T2",
        // "CONV3_K256", "POOL3_T2",
        
        "FC", "DROPOUT",
        "FC", "DROPOUT"
    ],
    
    // output logits
    "out_port": {
        "last_fc": 5
    },

    // Macros below
    // parameters-format in correspondence with Tensorflow_api
    "__define__": {

        "CONV3_K64": {
            // input Shape [in_depth, in_height, in_width, in_channels].
            // output Shape ==? input Shape
            "type": "conv3d",
            // filter Shape [filter_depth, filter_height, filter_width, in_channels, out_channels]
                // in_channels: RGB 
                //          or optical flow (x or y) 
                //          or number of last conv layer filters
                // out_channels: number of filters
            "filter": [3, 3, 3, -1, 64],
            "init_stddev": 0.01,
            // same format with input
            "strides": [1, 1, 1, 1, 1],
            "padding": "SAME",
            "weight_decay": 0.005
            // default follow with RELU
        },
        "CONV3_K128": {
            // input Shape [in_depth, in_height, in_width, in_channels].
            // output Shape ==? input Shape
            "type": "conv3d",
            // filter Shape [filter_depth, filter_height, filter_width, in_channels, out_channels]
                // in_channels: RGB 
                //          or optical flow (x or y) 
                //          or number of last conv layer filters
                // out_channels: number of filters
            "filter": [3, 3, 3, -1, 128],
            "init_stddev": 0.01,
            // same format with input
            "strides": [1, 1, 1, 1, 1],
            "padding": "SAME",
            "weight_decay": 0.005
            // default follow with RELU
        },
        "CONV3_K256": {
            // input Shape [in_depth, in_height, in_width, in_channels].
            // output Shape ==? input Shape
            "type": "conv3d",
            // filter Shape [filter_depth, filter_height, filter_width, in_channels, out_channels]
                // in_channels: RGB 
                //          or optical flow (x or y) 
                //          or number of last conv layer filters
                // out_channels: number of filters
            "filter": [3, 3, 3, -1, 256],
            "init_stddev": 0.01,
            // same format with input
            "strides": [1, 1, 1, 1, 1],
            "padding": "SAME",
            "weight_decay": 0.005
            // default follow with RELU
        },
        
        "POOL3_T1": {
            "type": "max_pool3d",
            // first and last must '1'
            // middle: [depth, height, width]
            "ksize": [1, 1, 2, 2, 1],
            "strides": [1, 1, 2, 2, 1],
            "padding": "SAME"
        },
        "POOL3_T2": {
            "type": "max_pool3d",
            // first and last must '1'
            "ksize": [1, 2, 2, 2, 1],
            "strides": [1, 2, 2, 2, 1],
            "padding": "SAME"
        },

        // // local response normalization
        // "LRN": {
        //  "type": "lrn",
        //  "depth_radius": 4,
        //  "bias": 1.0,
        //  "alpha": ,
        // },

        "FC": {
            "type": "fc",
            // -1 means auto-compute
            "shape": [-1, 2048],
            "init_stddev": 0.005,
            "weight_decay": 0.005
            // default follow with RELU
        },
        "DROPOUT": {
            "type": "dropout",
            "prob": 0.5
        }
    }
}
